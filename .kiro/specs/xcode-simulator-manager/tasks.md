# 実装計画

- [x] 1. プロジェクト構造の設定とコアインターフェースの作成
  - xsim用のディレクトリ構造を作成
  - Package.swiftを更新してxsim実行可能ファイルを定義
  - 基本的なCLIエントリーポイントを作成
  - _要件: 8.1, 8.4_

- [x] 2. データモデルとバリデーションの実装
- [x] 2.1 コアデータモデルインターフェースとタイプの作成
  - SimulatorDevice、DeviceType、Runtime構造体を実装
  - SimulatorState列挙型を実装
  - JSON解析用のCodableプロトコル準拠を追加
  - _要件: 1.1, 1.2, 6.5_

- [x] 2.2 SimulatorErrorエラータイプの実装
  - カスタムエラータイプを定義
  - 日本語エラーメッセージを実装
  - LocalizedErrorプロトコル準拠を追加
  - _要件: 2.2, 4.4, 5.2, 5.3, 6.3_

- [x] 3. SimulatorServiceクラスの実装
- [x] 3.1 基本的なsimctl実行ユーティリティの実装
  - Processを使用したsimctlコマンド実行機能
  - JSON出力の解析機能
  - エラーハンドリングユーティリティ
  - _要件: 1.1, 2.2, 3.3, 4.4, 5.2, 6.3, 7.4_

- [x] 3.2 デバイス一覧取得機能の実装
  - listDevices()メソッドを実装
  - simctl list devicesコマンドの実行とJSON解析
  - 単体テストを作成
  - _要件: 1.1, 1.2, 1.3_

- [x] 3.3 シミュレータ起動機能の実装
  - startSimulator()メソッドを実装
  - simctl bootコマンドの実行
  - 起動ステータスの確認機能
  - 単体テストを作成
  - _要件: 2.1, 2.2, 2.3, 2.4_

- [x] 3.4 シミュレータ停止機能の実装
  - stopSimulator()メソッドを実装
  - 個別停止と全停止の両方をサポート
  - simctl shutdownコマンドの実行
  - 単体テストを作成
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 3.5 シミュレータリセット機能の実装
  - resetSimulator()メソッドを実装
  - 実行中シミュレータの事前停止処理
  - simctl eraseコマンドの実行
  - 単体テストを作成
  - _要件: 4.1, 4.2, 4.3, 4.4_

- [x] 3.6 アプリインストール機能の実装
  - installApp()メソッドを実装
  - アプリバンドルパスの検証
  - simctl installコマンドの実行
  - 単体テストを作成
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 3.7 シミュレータ作成機能の実装
  - createSimulator()メソッドを実装
  - getAvailableDeviceTypes()とgetAvailableRuntimes()メソッドを実装
  - simctl createコマンドの実行
  - 単体テストを作成
  - _要件: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 3.8 シミュレータ削除機能の実装
  - deleteSimulator()メソッドを実装
  - 実行中シミュレータの事前停止処理
  - simctl deleteコマンドの実行
  - 単体テストを作成
  - _要件: 7.1, 7.2, 7.3, 7.4_

- [x] 4. コマンドクラスの実装
- [x] 4.1 ListCommandの実装
  - SwiftCLI Commandプロトコルに準拠
  - フラグオプション（--running, --available）を実装
  - 表形式での出力フォーマット
  - _要件: 1.1, 1.2, 1.3_

- [x] 4.2 StartCommandの実装
  - デバイス識別子パラメータの処理
  - 名前またはUUIDでの検索機能
  - 起動フィードバックの表示
  - _要件: 2.1, 2.2, 2.3, 2.4_

- [x] 4.3 StopCommandの実装
  - オプショナルデバイス識別子の処理
  - 全停止機能の実装
  - 停止確認メッセージの表示
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 4.4 ResetCommandの実装
  - 必須デバイス識別子の処理
  - リセット確認の表示
  - エラーハンドリング
  - _要件: 4.1, 4.2, 4.3, 4.4_

- [x] 4.5 InstallCommandの実装
  - デバイス識別子とアプリパスパラメータの処理
  - パス検証機能
  - インストール確認の表示
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 4.6 CreateCommandの実装
  - 名前、デバイスタイプ、ランタイムパラメータの処理
  - --list-types、--list-runtimesフラグの実装
  - 作成確認とUUID表示
  - _要件: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 4.7 DeleteCommandの実装
  - デバイス識別子パラメータの処理
  - 削除前の確認処理
  - 削除確認メッセージの表示
  - _要件: 7.1, 7.2, 7.3, 7.4_

- [x] 5. メインCLIクラスの実装
- [x] 5.1 XSimCLIクラスの実装
  - すべてのコマンドを登録
  - CLI設定（名前、バージョン、説明）
  - Rainbow設定の適用
  - _要件: 8.1, 8.4_

- [x] 5.2 メインエントリーポイントの実装
  - main.swiftファイルの作成
  - XSimCLIの初期化と実行
  - _要件: 8.1, 8.4_

- [ ] 6. ヘルプシステムの実装
- [ ] 6.1 各コマンドのヘルプ情報の充実
  - 詳細な説明文の追加
  - 使用例の追加
  - パラメータとフラグの説明
  - _要件: 8.1, 8.2, 8.3, 8.4_

- [ ] 7. 統合テストの実装
- [ ] 7.1 エンドツーエンドテストの作成
  - 実際のsimctlとの連携テスト
  - 各コマンドの動作確認テスト
  - エラーケースのテスト
  - _要件: 全要件の統合テスト_

- [ ] 8. ビルドとパッケージングの設定
- [ ] 8.1 Package.swiftの最終調整
  - 実行可能ファイル名をxsimに設定
  - 依存関係の確認
  - プラットフォーム設定の確認
  - _要件: 8.1_

- [ ] 8.2 ビルドスクリプトの作成
  - リリースビルド用のスクリプト
  - インストール用のスクリプト
  - _要件: 8.1_